From 61b59cbad827bf45d2d93bf895cbab04edd4341c Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Cl=C3=A9ment=20B=C3=A9nier?= <clement.benier@openwide.fr>
Date: Wed, 9 Dec 2015 17:22:32 +0100
Subject: [PATCH 1/1] modif hwcomposer
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Signed-off-by: Clément Bénier <clement.benier@openwide.fr>
---
 src/bin/e_backlight.c             | 4 +---
 src/modules/wl_eglfs/e_mod_main.c | 4 ++--
 2 files changed, 3 insertions(+), 5 deletions(-)

diff --git a/src/bin/e_backlight.c b/src/bin/e_backlight.c
index 89552e3..bc21ba7 100644
--- a/src/bin/e_backlight.c
+++ b/src/bin/e_backlight.c
@@ -28,9 +28,7 @@ static void      _e_backlight_update(void);
 static void      _e_backlight_set(double val);
 static Eina_Bool _bl_anim(void *data, double pos);
 static Eina_Bool bl_avail = EINA_TRUE;
-#ifndef HAVE_WAYLAND_ONLY
 static Eina_Bool xbl_avail = EINA_FALSE;
-#endif
 #if defined(HAVE_EEZE) || defined(__FreeBSD_kernel__)
 static double bl_delayval = 1.0;
 static const char *bl_sysval = NULL;
@@ -162,7 +160,7 @@ E_API void
 e_backlight_mode_set(E_Zone *zone, E_Backlight_Mode mode)
 {
    E_Backlight_Mode pmode;
-   
+
    // zone == NULL == everything
    if (e_config->backlight.mode == mode) return;
    pmode = e_config->backlight.mode;
diff --git a/src/modules/wl_eglfs/e_mod_main.c b/src/modules/wl_eglfs/e_mod_main.c
index 5c2470d..4cf91b3 100644
--- a/src/modules/wl_eglfs/e_mod_main.c
+++ b/src/modules/wl_eglfs/e_mod_main.c
@@ -12,7 +12,7 @@ e_modapi_init(E_Module *m)
    int w, h;
 
    printf("LOAD WL_EGLFS MODULE\n");
-   e_util_env_set("HYBRIS_EGLPLATFORM", "fbdev");
+   e_util_env_set("HYBRIS_EGLPLATFORM", "hwcomposer");
 
    /* try to init ecore_fb */
    if (!ecore_fb_init(NULL))
@@ -52,7 +52,7 @@ e_modapi_init(E_Module *m)
    return m;
 }
 
-E_API int 
+E_API int
 e_modapi_shutdown(E_Module *m EINA_UNUSED)
 {
    /* shutdown ecore_fb */
-- 
2.6.2

